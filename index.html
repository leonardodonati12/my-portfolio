<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leonardo Donati | Portfolio</title>
    <style>
        /* --- CONFIGURAÇÕES GERAIS --- */
        body {
            margin: 0;
            overflow: hidden;
            background-color: #050505;
            color: #fff;
            font-family: 'Consolas', 'Courier New', monospace;
            cursor: none;
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* --- TELAS DE OVERLAY --- */
        .overlay-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease-in-out;
            z-index: 5000;
        }

        #intro-overlay {
            z-index: 5003;
        }

        #about-overlay {
            z-index: 5002;
            display: none;
            padding: 0 25%;
            box-sizing: border-box;
        }

        #phrases-overlay {
            z-index: 5001;
            display: none;
            padding: 0 20%;
            box-sizing: border-box;
        }

        /* ESTILOS DE TEXTO */
        .intro-name {
            font-size: 4rem;
            font-weight: 900;
            letter-spacing: -2px;
            color: #fff;
            margin-bottom: 10px;
            text-align: center;
        }

        .intro-role {
            font-size: 1.2rem;
            letter-spacing: 5px;
            color: #00ff88;
            margin-bottom: 50px;
            text-align: center;
            height: 30px;
            font-weight: bold;
        }

        .about-title {
            font-size: 2rem;
            color: #00ff88;
            margin-bottom: 40px;
            letter-spacing: 3px;
        }

        .about-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #ddd;
            text-align: left;
            width: 100%;
            white-space: pre-wrap;
        }

        /* ESTILO DAS FRASES (Loop) */
        .phrases-text {
            font-size: 1.5rem;
            line-height: 1.5;
            color: #00ff88;
            text-align: center;
            min-height: 80px; /* Reduzi um pouco para ficar mais compacto */
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
            display: flex;
            align-items: flex-end;
            justify-content: center; /* Alinha o texto mais pra baixo perto da dica */
        }

        /* BOTÃO E DICAS */
        .enter-btn {
            padding: 15px 40px;
            border: 1px solid #00ff88;
            background: transparent;
            color: #fff;
            font-family: 'Consolas', monospace;
            font-size: 1rem;
            letter-spacing: 2px;
            cursor: none;
            transition: all 0.3s;
            opacity: 0;
            animation: fadeIn 2s forwards 1s;
        }

            .enter-btn:hover {
                background: #00ff88;
                color: #000;
                box-shadow: 0 0 20px #00ff88;
            }

        .continue-hint {
            margin-top: 50px; /* Padrão para telas normais */
            font-size: 0.8rem;
            color: #555;
            letter-spacing: 2px;
            animation: pulse 2s infinite;
            cursor: none;
            opacity: 0;
            transition: opacity 1s;
        }

        /* AJUSTE ESPECÍFICO PARA APROXIMAR NA TELA DE FRASES */
        #phrases-overlay .continue-hint {
            margin-top: 20px; /* Bem pertinho da frase */
        }

        /* EFEITOS ESPECIAIS */
        .char-hidden {
            color: transparent;
        }

        .glitch-char {
            color: #555;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.5;
            }

            50% {
                opacity: 1;
            }
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        /* --- SITE PRINCIPAL --- */
        .hero {
            position: absolute;
            top: 10%;
            left: 5%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 2s;
        }

        h1 {
            font-size: 3.5rem;
            margin: 0;
            color: #fff;
            mix-blend-mode: overlay;
            line-height: 1.1;
        }

        .subtitle {
            color: #00ff88;
            letter-spacing: 3px;
            font-size: 1rem;
            margin-top: 15px;
        }

        .gallery-container {
            position: absolute;
            top: 0;
            right: 0;
            width: 400px;
            height: 100vh;
            overflow-y: auto;
            padding: 40px;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            border-left: 1px solid #333;
            opacity: 0;
            transition: opacity 2s;
            transform: translateX(50px);
        }

        body.active .hero {
            opacity: 1;
        }

        body.active .gallery-container {
            opacity: 1;
            transform: translateX(0);
            transition: opacity 2s, transform 1s;
        }

        /* --- ASSETS --- */
        .project-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #00ff88;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 4px;
            transition: transform 0.3s, background 0.3s;
            cursor: none;
        }

            .project-card:hover {
                transform: translateX(-10px);
                background: rgba(0, 255, 136, 0.1);
            }

        .project-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: #fff;
        }

        .project-tech {
            font-size: 0.8rem;
            color: #00ff88;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .project-desc {
            font-size: 0.9rem;
            color: #ccc;
            line-height: 1.4;
        }

        ::-webkit-scrollbar {
            width: 5px;
        }

        ::-webkit-scrollbar-track {
            background: #111;
        }

        ::-webkit-scrollbar-thumb {
            background: #00ff88;
        }

        .cursor-dot {
            width: 8px;
            height: 8px;
            background-color: #00ff88;
            border-radius: 50%;
            position: fixed;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 9999;
        }

        .cursor-outline {
            width: 40px;
            height: 40px;
            border: 1px solid rgba(0, 255, 136, 0.5);
            border-radius: 50%;
            position: fixed;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 9998;
            transition: width 0.2s, height 0.2s, background-color 0.2s;
        }

        @media (max-width: 768px) {
            .gallery-container {
                width: 100%;
                bottom: 0;
                top: auto;
                height: 50vh;
            }

            h1 {
                font-size: 2.5rem;
            }

            .intro-name {
                font-size: 2.5rem;
            }

            #about-overlay, #phrases-overlay {
                padding: 0 10%;
            }

            .phrases-text {
                font-size: 1rem;
            }

            body {
                cursor: auto;
            }

            .cursor-dot, .cursor-outline {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <div id="intro-overlay" class="overlay-screen">
        <div class="intro-name">LEONARDO DONATI</div>
        <div class="intro-role" id="scramble-text"></div>
        <button class="enter-btn" id="start-btn">[ ENTER SYSTEM ]</button>
    </div>

    <div id="about-overlay" class="overlay-screen">
        <div class="about-title">WHO AM I?</div>
        <div class="about-text" id="bio-text-container"></div>
        <div class="continue-hint" id="about-hint">[ CLICK ANYWHERE TO CONTINUE ]</div>
    </div>

    <div id="phrases-overlay" class="overlay-screen">
        <div class="phrases-text" id="phrases-container"></div>
        <div class="continue-hint" style="opacity: 1;">[ CLICK ANYWHERE TO CONTINUE ]</div>
    </div>

    <div class="hero">
        <h1>LEONARDO<br>DONATI</h1>
        <div class="subtitle">COMPUTATIONAL DESIGN & DEV</div>
    </div>
    <div class="gallery-container" id="lista-projetos"></div>
    <div id="canvas-container"></div>

    <script type="module">
        import * as THREE from 'https://cdn.skypack.dev/three@0.136.0';

        // DOM ELEMENTS
        const introOverlay = document.getElementById('intro-overlay');
        const aboutOverlay = document.getElementById('about-overlay');
        const phrasesOverlay = document.getElementById('phrases-overlay');
        const startBtn = document.getElementById('start-btn');
        const bioContainer = document.getElementById('bio-text-container');
        const aboutHint = document.getElementById('about-hint');
        const phrasesContainer = document.getElementById('phrases-container');

        // DADOS
        const bioText = "I avoid definitions; I feel they limit me.\n\nWhenever I attempt to organize space, I end up rewriting the syntax of the place to create a narrative.\n\nI seek to make each piece obey an invisible rule and decide to tell a unique story.\n\nI persist in the attempt to compile everything that resonates with me...";

        const phrasesList = [
            "I wrote the code, but you are the one rendering it.",
            "Careful where you click: some variables are loose.",
            "As you observe the project, the algorithm observes you.",
            "Don't be afraid. It is just logic trying to be art.",
            "Loading fragments of a thought process...",
            "This is not a website. It is a render of my consciousness.",
            "Here, gravity is just a syntax suggestion.",
            "You are not on the internet. You are inside a loop of my creative process.",
            "Space under construction. The mind, too.",
            "Don't touch the screen. The digital concrete is still wet.",
            "Are you the user, or just another parameter?",
            "Welcome to the backend of my imagination.",
            "Compiling chaos into structure. Please wait.",
            "Entry permitted. Exit not guaranteed.",
            "Everything here is code. Even the void.",
            "This is a portfolio. This is not a portfolio.",
            "You are in my mind now. Good luck.",
            "This page is thinking about you right now.",
            "Your visit has been logged. My architecture now knows who you are.",
            "To navigate here is to compile memories that are not yours.",
            "There is a system error: it has learned to feel."
        ];

        // 1. INTRO -> ABOUT
        startBtn.addEventListener('click', () => {
            introOverlay.style.opacity = '0';
            setTimeout(() => {
                introOverlay.style.display = 'none';
                aboutOverlay.style.display = 'flex';
                runGhostTypewriter(bioText, bioContainer, () => {
                    aboutHint.style.opacity = '1';
                });
            }, 1000);
        });

        // 2. ABOUT -> PHRASES
        let bioFinished = false;
        aboutOverlay.addEventListener('click', () => {
            if (!bioFinished) {
                bioFinished = true;
                const spans = bioContainer.querySelectorAll('span');
                spans.forEach(s => { s.className = ''; s.innerText = s.dataset.char; });
                aboutHint.style.opacity = '1';
                return;
            }
            aboutOverlay.style.opacity = '0';
            setTimeout(() => {
                aboutOverlay.style.display = 'none';
                phrasesOverlay.style.display = 'flex';
                runPhrasesLoop();
            }, 1000);
        });

        // 3. PHRASES -> SITE
        let stopPhrasesLoop = false;
        phrasesOverlay.addEventListener('click', () => {
            stopPhrasesLoop = true;
            phrasesOverlay.style.opacity = '0';
            document.body.classList.add('active');
            setTimeout(() => { phrasesOverlay.style.display = 'none'; }, 1000);
        });

        // LÓGICA LOOP FRASES
        async function runPhrasesLoop() {
            let index = 0;
            while (!stopPhrasesLoop) {
                const phrase = phrasesList[index];
                await runGhostTypewriter(phrase, phrasesContainer, null, true);
                if (stopPhrasesLoop) break;
                await new Promise(r => setTimeout(r, 3000));
                if (stopPhrasesLoop) break;
                phrasesContainer.innerHTML = '';
                index = (index + 1) % phrasesList.length;
            }
        }

        // GHOST TYPEWRITER (CORE)
        async function runGhostTypewriter(text, element, callback, isPhraseMode = false) {
            const chars = '!<>-_\\/[]{}—=+*^?#________';
            element.innerHTML = '';

            const spans = [];
            for (let i = 0; i < text.length; i++) {
                const char = text[i];
                if (char === '\n') {
                    element.appendChild(document.createElement('br'));
                    spans.push({ isBreak: true });
                } else {
                    const span = document.createElement('span');
                    span.innerText = char; span.dataset.char = char; span.className = 'char-hidden';
                    element.appendChild(span);
                    spans.push({ dom: span, isBreak: false });
                }
            }

            const glitchSpeed = isPhraseMode ? 5 : 10;
            const letterDelay = isPhraseMode ? 10 : 30;

            for (let i = 0; i < spans.length; i++) {
                if (!isPhraseMode && bioFinished) break;
                if (isPhraseMode && stopPhrasesLoop) break;

                const item = spans[i];
                if (item.isBreak) { await new Promise(r => setTimeout(r, letterDelay)); continue; }

                const span = item.dom;
                if (span.innerText === ' ') {
                    span.className = ''; await new Promise(r => setTimeout(r, 5)); continue;
                }

                for (let j = 0; j < 3; j++) {
                    span.innerText = chars[Math.floor(Math.random() * chars.length)];
                    span.className = 'glitch-char';
                    await new Promise(r => setTimeout(r, glitchSpeed));
                }

                span.innerText = span.dataset.char;
                span.className = '';
            }

            if (!isPhraseMode) bioFinished = true;
            if (callback) callback();
        }

        // RESTO DO CÓDIGO
        const roles = ["URBAN DESIGNER", "ARCHITECTURE STUDENT", "BEGINNER DEVELOPER", "COMPUTATIONAL DESIGNER", "CURIOUS MIND"];
        const el = document.getElementById('scramble-text');
        const chars = '!<>-_\\/[]{}—=+*^?#________';
        let roleIndex = 0; let loopInterval = null;
        const setText = (newText) => {
            const oldText = el.innerText; const length = Math.max(oldText.length, newText.length);
            let queue = []; for (let i = 0; i < length; i++) { const from = oldText[i] || ''; const to = newText[i] || ''; const start = Math.floor(Math.random() * 40); const end = start + Math.floor(Math.random() * 40); queue.push({ from, to, start, end }); }
            cancelAnimationFrame(loopInterval); let frame = 0;
            const update = () => { let output = ''; let complete = 0; for (let i = 0, n = queue.length; i < n; i++) { let { from, to, start, end, char } = queue[i]; if (frame >= end) { complete++; output += to; } else if (frame >= start) { if (!char || Math.random() < 0.28) { char = chars[Math.floor(Math.random() * chars.length)]; queue[i].char = char; } output += `<span style="color: #444;">${char}</span>`; } else { output += from; } } el.innerHTML = output; if (complete === queue.length) { setTimeout(nextRole, 2000); } else { loopInterval = requestAnimationFrame(update); frame++; } }; update();
        };
        const nextRole = () => { if (document.body.classList.contains('active') || aboutOverlay.style.display === 'flex' || phrasesOverlay.style.display === 'flex') return; setText(roles[roleIndex]); roleIndex = (roleIndex + 1) % roles.length; };
        nextRole();

        const cursorDot = document.querySelector('.cursor-dot'); const cursorOutline = document.querySelector('.cursor-outline');
        window.addEventListener('mousemove', function (e) { const posX = e.clientX; const posY = e.clientY; cursorDot.style.left = `${posX}px`; cursorDot.style.top = `${posY}px`; cursorOutline.animate({ left: `${posX}px`, top: `${posY}px` }, { duration: 500, fill: "forwards" }); });
        const addHoverEffect = (element) => { element.addEventListener('mouseenter', () => { cursorOutline.style.width = '60px'; cursorOutline.style.height = '60px'; cursorOutline.style.backgroundColor = 'rgba(0, 255, 136, 0.1)'; }); element.addEventListener('mouseleave', () => { cursorOutline.style.width = '40px'; cursorOutline.style.height = '40px'; cursorOutline.style.backgroundColor = 'transparent'; }); };
        addHoverEffect(startBtn); addHoverEffect(aboutOverlay); addHoverEffect(phrasesOverlay);

        const container = document.getElementById('lista-projetos'); fetch('projetos.json').then(r => r.json()).then(projetos => { projetos.forEach(p => { const card = document.createElement('div'); card.className = 'project-card'; card.innerHTML = `<div class="project-title">${p.titulo}</div><div class="project-tech">// ${p.tech}</div><div class="project-desc">${p.descricao}</div>`; addHoverEffect(card); container.appendChild(card); }); }).catch(e => console.error(e));
        const scene = new THREE.Scene(); scene.fog = new THREE.FogExp2(0x050505, 0.002); const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000); camera.position.set(-10, 5, 10); camera.lookAt(0, 0, 0); const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true }); renderer.setSize(window.innerWidth, window.innerHeight); document.getElementById('canvas-container').appendChild(renderer.domElement); const geometry = new THREE.IcosahedronGeometry(4, 2); const material = new THREE.MeshBasicMaterial({ color: 0x00ff88, wireframe: true, transparent: true, opacity: 0.15 }); const sphere = new THREE.Mesh(geometry, material); scene.add(sphere); const pGeo = new THREE.BufferGeometry(); const pCount = 2000; const pPos = new Float32Array(pCount * 3); for (let i = 0; i < pCount * 3; i++) pPos[i] = (Math.random() - 0.5) * 30; pGeo.setAttribute('position', new THREE.BufferAttribute(pPos, 3)); const pMat = new THREE.PointsMaterial({ size: 0.03, color: 0xffffff }); const particles = new THREE.Points(pGeo, pMat); scene.add(particles); function animate() { requestAnimationFrame(animate); sphere.rotation.y += 0.002; sphere.rotation.x += 0.001; particles.rotation.y -= 0.0005; renderer.render(scene, camera); } animate(); window.addEventListener('resize', () => { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); });
    </script>
</body>
</html>