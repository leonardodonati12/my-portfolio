<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leonardo Donati | Portfolio</title>
    <style>
        /* --- CONFIGURAÇÕES GERAIS --- */
        body {
            margin: 0;
            overflow: hidden;
            background-color: #050505;
            color: #fff;
            font-family: 'Consolas', 'Courier New', monospace;
            cursor: none;
            user-select: none;
        }

        /* O CONTAINER GLOBAL QUE SERÁ EMPURRADO */
        #main-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            z-index: 0;
        }

        /* ESTADOS DE EMPURRÃO (DOCKING) */
        body.push-left #main-wrapper {
            transform: translateX(260px);
        }

        body.push-right #main-wrapper {
            transform: translateX(-260px);
        }

        body.push-top #main-wrapper {
            transform: translateY(260px);
        }

        body.push-bottom #main-wrapper {
            transform: translateY(-260px);
        }

        #canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        /* --- TELAS DE OVERLAY --- */
        .overlay-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease-in-out;
            z-index: 5000;
        }

        #intro-overlay {
            z-index: 5003;
        }

        #about-overlay {
            z-index: 5002;
            display: none;
            padding: 0 25%;
            box-sizing: border-box;
        }

        #phrases-overlay {
            z-index: 5001;
            display: none;
            padding: 0 15%;
            box-sizing: border-box;
        }

        /* TEXTOS OVERLAY */
        .intro-name {
            font-size: 4rem;
            font-weight: 900;
            letter-spacing: -2px;
            color: #fff;
            margin-bottom: 10px;
            text-align: center;
        }

        .intro-role {
            font-size: 1.2rem;
            letter-spacing: 5px;
            color: #00ff88;
            margin-bottom: 50px;
            text-align: center;
            height: 30px;
            font-weight: bold;
        }

        .about-title {
            font-size: 2rem;
            color: #00ff88;
            margin-bottom: 40px;
            letter-spacing: 3px;
        }

        .about-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #ddd;
            text-align: left;
            width: 100%;
            white-space: pre-wrap;
        }

        .phrases-text {
            font-size: 1.5rem;
            line-height: 1.4;
            color: #00ff88;
            text-align: center;
            min-height: 80px;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
            display: flex;
            align-items: flex-end;
            justify-content: center;
            margin-bottom: 0;
        }

        .continue-hint {
            margin-top: 50px;
            font-size: 0.8rem;
            color: #555;
            letter-spacing: 2px;
            animation: pulse 2s infinite;
            cursor: none;
            opacity: 0;
            transition: opacity 1s;
        }

        #phrases-overlay .continue-hint {
            margin-top: 50px;
        }

        .enter-btn {
            padding: 15px 40px;
            border: 1px solid #00ff88;
            background: transparent;
            color: #fff;
            font-family: 'Consolas', monospace;
            font-size: 1rem;
            letter-spacing: 2px;
            cursor: none;
            transition: all 0.3s;
            opacity: 0;
            animation: fadeIn 2s forwards 1s;
        }

            .enter-btn:hover {
                background: #00ff88;
                color: #000;
                box-shadow: 0 0 20px #00ff88;
            }

        /* --- SITE UI --- */
        .hero {
            position: absolute;
            top: 10%;
            left: 5%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 2s;
            z-index: 10;
        }

            .hero h1, .hero .subtitle {
                pointer-events: auto;
                cursor: help;
            }

        h1 {
            font-size: 3.5rem;
            margin: 0;
            color: #fff;
            mix-blend-mode: overlay;
            line-height: 1.1;
        }

        .subtitle {
            color: #00ff88;
            letter-spacing: 3px;
            font-size: 1rem;
            margin-top: 15px;
            display: inline-block;
            padding: 5px 0;
        }

        .interaction-hint {
            position: absolute;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%);
            color: #555;
            font-size: 0.8rem;
            letter-spacing: 1px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 2s;
        }

        body.active .hero, body.active .interaction-hint {
            opacity: 1;
        }

        /* --- PAINEL DE HABILIDADES (SYSTEM PROPS) --- */

        #skills-toggle {
            position: fixed;
            top: 20%;
            left: 0;
            background: #000;
            border: 1px solid #00ff88;
            border-left: none;
            color: #00ff88;
            padding: 30px 12px;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            font-size: 0.8rem;
            letter-spacing: 4px;
            text-transform: uppercase;
            cursor: none;
            z-index: 4000;
            transition: all 0.3s;
            border-radius: 0 15px 15px 0;
            opacity: 0;
        }

        body.active #skills-toggle {
            opacity: 1;
        }

        #skills-toggle:hover {
            background: #00ff88;
            color: #000;
            padding-left: 20px;
            box-shadow: 0 0 15px rgba(0,255,136,0.3);
        }

        #skills-panel {
            position: fixed;
            background: rgba(15, 15, 15, 0.9);
            backdrop-filter: blur(15px);
            border: 1px solid #333;
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
            z-index: 4001;
            display: none;
            flex-direction: column;
            transition: width 0.3s, height 0.3s, border-radius 0.3s; /* Transições suaves de geometria */
        }

            /* --- CONFIGURAÇÕES DE ACOPLAMENTO (DOCKING) --- */

            /* Esquerda (Padrão) */
            #skills-panel.docked-left {
                top: 0;
                left: 0;
                width: 260px;
                height: 100%;
                border-radius: 0;
                border-right: 1px solid #00ff88;
            }

            /* Direita */
            #skills-panel.docked-right {
                top: 0;
                right: 0;
                width: 260px;
                height: 100%;
                border-radius: 0;
                border-left: 1px solid #00ff88;
            }

            /* Topo */
            #skills-panel.docked-top {
                top: 0;
                left: 0;
                width: 100%;
                height: 260px;
                border-radius: 0;
                border-bottom: 1px solid #00ff88;
            }

            /* Baixo */
            #skills-panel.docked-bottom {
                bottom: 0;
                left: 0;
                width: 100%;
                height: 260px;
                border-radius: 0;
                border-top: 1px solid #00ff88;
            }

            /* Flutuante */
            #skills-panel.floating {
                width: 260px;
                height: auto;
                border-radius: 15px;
                border: 1px solid #444;
            }

        /* CABEÇALHO DO PAINEL */
        .panel-header {
            padding: 10px 15px;
            font-size: 0.75rem;
            letter-spacing: 2px;
            color: #00ff88;
            cursor: grab;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0,255,136,0.05);
            transition: background 0.2s;
        }

        #skills-panel.floating .panel-header {
            border-radius: 15px 15px 0 0;
        }

        .panel-header:active {
            cursor: grabbing;
            background: rgba(0,255,136,0.2);
        }

        /* Área de conteúdo das skills */
        .panel-content {
            padding: 20px;
            overflow-y: auto;
            flex: 1;
        }
        /* Se estiver top/bottom, mudar layout para colunas se quiser (opcional, mantive lista vertical simples) */

        .skill-item {
            margin-bottom: 15px;
        }

        .skill-name {
            font-size: 0.7rem;
            color: #eee;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            letter-spacing: 1px;
        }

        .retro-bar {
            display: flex;
            gap: 2px;
            height: 6px;
        }

        .bar-block {
            flex: 1;
            background: rgba(255,255,255,0.1);
            border-radius: 1px;
        }

            .bar-block.filled {
                background: #00ff88;
                box-shadow: 0 0 5px rgba(0,255,136,0.4);
            }

        .close-panel {
            cursor: pointer;
            color: #fff;
            font-size: 1.2rem;
        }

            .close-panel:hover {
                color: #00ff88;
            }

        /* --- MODAL PROJETO --- */
        #project-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 500px;
            background: rgba(10, 10, 10, 0.95);
            border: 1px solid #00ff88;
            padding: 40px;
            border-radius: 20px;
            z-index: 4005;
            display: none;
            flex-direction: column;
            box-shadow: 0 0 50px rgba(0, 255, 136, 0.15);
            opacity: 0;
            transition: opacity 0.5s;
        }

            #project-modal.open {
                display: flex;
                opacity: 1;
            }

        .modal-title {
            font-size: 1.5rem;
            color: #fff;
            margin-bottom: 10px;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
        }

        .modal-tech {
            color: #00ff88;
            font-size: 0.9rem;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .modal-desc {
            color: #ccc;
            line-height: 1.6;
            font-size: 1rem;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            color: #555;
            font-size: 1.5rem;
            cursor: none;
            transition: color 0.3s;
        }

            .close-modal:hover {
                color: #00ff88;
            }

        /* EXTRAS */
        ::-webkit-scrollbar {
            width: 5px;
            height: 5px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 10px;
        }

            ::-webkit-scrollbar-thumb:hover {
                background: #00ff88;
            }

        .cursor-dot {
            width: 8px;
            height: 8px;
            background-color: #00ff88;
            border-radius: 50%;
            position: fixed;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 9999;
        }

        .cursor-outline {
            width: 40px;
            height: 40px;
            border: 1px solid rgba(0, 255, 136, 0.5);
            border-radius: 50%;
            position: fixed;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 9998;
            transition: width 0.2s, height 0.2s, background-color 0.2s;
        }

        .char-hidden {
            opacity: 0;
        }

        .glitch-char {
            color: #555;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.5;
            }

            50% {
                opacity: 1;
            }
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }

            #project-modal {
                width: 90%;
            }

            body {
                cursor: auto;
            }

            .cursor-dot, .cursor-outline {
                display: none;
            }
            /* Mobile desativa docking complexo */
            body[class*="push-"] #main-wrapper {
                transform: none !important;
            }

            #skills-panel {
                width: 100% !important;
                height: 50% !important;
                bottom: 0 !important;
                top: auto !important;
                left: 0 !important;
                border-radius: 20px 20px 0 0;
            }
        }
    </style>
</head>
<body>
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <div id="intro-overlay" class="overlay-screen">
        <div class="intro-name">LEONARDO DONATI</div>
        <div class="intro-role" id="scramble-text"></div>
        <button class="enter-btn" id="start-btn">[ ENTER SYSTEM ]</button>
    </div>
    <div id="about-overlay" class="overlay-screen">
        <div class="about-title">WHO AM I?</div>
        <div class="about-text" id="bio-text-container"></div>
        <div class="continue-hint" id="about-hint">[ CLICK ANYWHERE TO CONTINUE ]</div>
    </div>
    <div id="phrases-overlay" class="overlay-screen">
        <div class="phrases-text" id="phrases-container"></div>
        <div class="continue-hint" style="opacity: 1;">[ CLICK ANYWHERE TO CONTINUE ]</div>
    </div>

    <div id="main-wrapper">
        <div class="hero">
            <h1 id="hero-name"><div id="name-line-1">LEONARDO</div><div id="name-line-2">DONATI</div></h1>
            <div class="subtitle" id="hero-subtitle">ARCHITECTURE STUDENT</div>
        </div>
        <div class="interaction-hint">[ DRAG TO ROTATE • CLICK NODES FOR DETAILS ]</div>
        <div id="canvas-container"></div>

        <div id="project-modal">
            <div class="close-modal" id="close-modal-btn">×</div>
            <div class="modal-title" id="modal-title">Project Name</div>
            <div class="modal-tech" id="modal-tech">// Tech Stack</div>
            <div class="modal-desc" id="modal-desc">Description goes here...</div>
        </div>
    </div>

    <div id="skills-toggle">ABILITIES</div>

    <div id="skills-panel" class="docked-left">
        <div class="panel-header" id="panel-header">
            <span>:: PROPERTIES</span>
            <span class="close-panel" id="close-panel-btn">×</span>
        </div>
        <div class="panel-content" id="skills-list">
        </div>
    </div>

    <script type="module">
        import * as THREE from 'https://cdn.skypack.dev/three@0.136.0';
        import { OrbitControls } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/controls/OrbitControls.js';

        // --- SKILLS ---
        const mySkills = [{ name: "REVIT / BIM", level: 90 }, { name: "RHINO / GRASSHOPPER", level: 85 }, { name: "DYNAMO", level: 80 }, { name: "C# / API DEV", level: 70 }, { name: "PYTHON", level: 60 }, { name: "ARCHICAD", level: 75 }, { name: "HTML / CSS / JS", level: 50 }, { name: "CREATIVITY", level: 100 }];

        // --- DOCKING SYSTEM LOGIC ---
        const skillsToggle = document.getElementById('skills-toggle');
        const skillsPanel = document.getElementById('skills-panel');
        const panelHeader = document.getElementById('panel-header');
        const closePanelBtn = document.getElementById('close-panel-btn');
        const skillsList = document.getElementById('skills-list');
        const body = document.body;

        // Gerar Barras
        mySkills.forEach(skill => {
            const item = document.createElement('div'); item.className = 'skill-item';
            const totalBlocks = 20; const filledBlocks = Math.round((skill.level / 100) * totalBlocks);
            let blocksHTML = ''; for (let i = 0; i < totalBlocks; i++) { blocksHTML += `<div class="bar-block ${i < filledBlocks ? 'filled' : ''}"></div>`; }
            item.innerHTML = `<div class="skill-name"><span>${skill.name}</span><span class="skill-percent">${skill.level}%</span></div><div class="retro-bar">${blocksHTML}</div>`;
            skillsList.appendChild(item);
        });

        // FUNÇÃO DE DOCKING (O Cérebro da Operação)
        function dockPanel(position) {
            // Remove todos os estados
            skillsPanel.classList.remove('docked-left', 'docked-right', 'docked-top', 'docked-bottom', 'floating');
            body.classList.remove('push-left', 'push-right', 'push-top', 'push-bottom');

            // Reseta estilos inline de drag
            skillsPanel.style.top = ''; skillsPanel.style.left = ''; skillsPanel.style.right = ''; skillsPanel.style.bottom = '';

            if (position === 'float') {
                skillsPanel.classList.add('floating');
            } else {
                skillsPanel.classList.add(`docked-${position}`);
                body.classList.add(`push-${position}`);
            }
        }

        // ABRIR (Default Left)
        skillsToggle.addEventListener('click', () => {
            skillsPanel.style.display = 'flex';
            skillsToggle.style.opacity = '0';
            dockPanel('left');
        });

        // FECHAR
        closePanelBtn.addEventListener('click', () => {
            skillsPanel.style.display = 'none';
            skillsToggle.style.opacity = '1';
            body.classList.remove('push-left', 'push-right', 'push-top', 'push-bottom');
        });

        // DRAG & SNAP SYSTEM
        let isDragging = false;
        let startX, startY;

        panelHeader.addEventListener('mousedown', (e) => {
            isDragging = true;
            startX = e.clientX;
            startY = e.clientY;

            // Se estava dockado, vira flutuante na posição do mouse
            if (!skillsPanel.classList.contains('floating')) {
                // Remove push do body imediatamente
                body.classList.remove('push-left', 'push-right', 'push-top', 'push-bottom');

                // Vira floating
                skillsPanel.classList.remove('docked-left', 'docked-right', 'docked-top', 'docked-bottom');
                skillsPanel.classList.add('floating');

                // Posiciona onde o mouse está (com um offset pra não pular)
                skillsPanel.style.left = (e.clientX - 130) + 'px'; // Metade da largura
                skillsPanel.style.top = (e.clientY - 20) + 'px';
            }

            panelHeader.style.cursor = 'grabbing';
        });

        window.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            // Movimento simples (sem offset complexo pra simplificar)
            skillsPanel.style.left = (e.clientX - 130) + 'px';
            skillsPanel.style.top = (e.clientY - 20) + 'px';

            // Highlight visual (Opcional: mudar borda se estiver perto da borda)
            const edgeThreshold = 50;
            if (e.clientX < edgeThreshold) skillsPanel.style.borderColor = '#00ff88'; // Left
            else if (e.clientX > window.innerWidth - edgeThreshold) skillsPanel.style.borderColor = '#00ff88'; // Right
            else if (e.clientY < edgeThreshold) skillsPanel.style.borderColor = '#00ff88'; // Top
            else if (e.clientY > window.innerHeight - edgeThreshold) skillsPanel.style.borderColor = '#00ff88'; // Bottom
            else skillsPanel.style.borderColor = '#333'; // Normal
        });

        window.addEventListener('mouseup', (e) => {
            if (!isDragging) return;
            isDragging = false;
            panelHeader.style.cursor = 'grab';
            skillsPanel.style.borderColor = '#333'; // Reset cor

            const edgeThreshold = 50; // Pixels perto da borda pra "imantar"

            // Lógica de SNAP (Imã)
            if (e.clientX < edgeThreshold) {
                dockPanel('left');
            } else if (e.clientX > window.innerWidth - edgeThreshold) {
                dockPanel('right');
            } else if (e.clientY < edgeThreshold) {
                dockPanel('top');
            } else if (e.clientY > window.innerHeight - edgeThreshold) {
                dockPanel('bottom');
            } else {
                // Mantém flutuante
                dockPanel('float');
                // Mantém a posição final do drag
                skillsPanel.style.left = (e.clientX - 130) + 'px';
                skillsPanel.style.top = (e.clientY - 20) + 'px';
            }
        });


        // --- CÓDIGO PADRÃO (RESTANTE DO SITE) ---
        const introOverlay = document.getElementById('intro-overlay'); const aboutOverlay = document.getElementById('about-overlay'); const phrasesOverlay = document.getElementById('phrases-overlay'); const startBtn = document.getElementById('start-btn'); const bioContainer = document.getElementById('bio-text-container'); const aboutHint = document.getElementById('about-hint'); const phrasesContainer = document.getElementById('phrases-container'); const modal = document.getElementById('project-modal'); const modalTitle = document.getElementById('modal-title'); const modalTech = document.getElementById('modal-tech'); const modalDesc = document.getElementById('modal-desc'); const closeBtn = document.getElementById('close-modal-btn'); const heroName = document.getElementById('hero-name'); const nameLine1 = document.getElementById('name-line-1'); const nameLine2 = document.getElementById('name-line-2'); const heroSubtitle = document.getElementById('hero-subtitle'); const bioText = "I avoid definitions; I feel they limit me.\n\nWhenever I attempt to organize space, I end up rewriting the syntax of the place to create a narrative.\n\nI seek to make each piece obey an invisible rule and decide to tell a unique story.\n\nI persist in the attempt to compile everything that resonates with me..."; const phrasesList = ["I wrote the code, but you are the one rendering it.", "Careful where you click: some variables are loose.", "As you observe the project, the algorithm observes you.", "Don't be afraid. It is just logic trying to be art.", "Loading fragments of a thought process...", "This is not a website. It is a render of my consciousness.", "Here, gravity is just a syntax suggestion.", "You are not on the internet. You are inside a loop of my creative process.", "Space under construction. The mind, too.", "Don't touch the screen. The digital concrete is still wet.", "Are you the user, or just another parameter?", "Welcome to the backend of my imagination.", "Compiling chaos into structure. Please wait.", "Entry permitted. Exit not guaranteed.", "Everything here is code. Even the void.", "This is a portfolio. This is not a portfolio.", "You are in my mind now. Good luck.", "This page is thinking about you right now.", "Your visit has been logged. My architecture now knows who you are.", "To navigate here is to compile memories that are not yours.", "There is a system error: it has learned to feel."];
        heroName.addEventListener('mouseenter', () => { scrambleTo(nameLine1, "LEONARDO"); scrambleTo(nameLine2, "DONATI"); }); heroSubtitle.addEventListener('mouseenter', () => { scrambleTo(heroSubtitle, "SCRAMBLED THOUGHTS"); }); heroSubtitle.addEventListener('mouseleave', () => { scrambleTo(heroSubtitle, "ARCHITECTURE STUDENT"); });
        startBtn.addEventListener('click', () => { introOverlay.style.opacity = '0'; setTimeout(() => { introOverlay.style.display = 'none'; aboutOverlay.style.display = 'flex'; runGhostTypewriter(bioText, bioContainer, () => { aboutHint.style.opacity = '1'; }); }, 1000); });
        let bioFinished = false; aboutOverlay.addEventListener('click', () => { if (!bioFinished) { bioFinished = true; const spans = bioContainer.querySelectorAll('span'); spans.forEach(s => { s.className = ''; s.innerText = s.dataset.char; s.style.opacity = '1'; }); aboutHint.style.opacity = '1'; return; } aboutOverlay.style.opacity = '0'; setTimeout(() => { aboutOverlay.style.display = 'none'; phrasesOverlay.style.display = 'flex'; phrasesContainer.innerText = ""; runPhrasesLoop(); }, 1000); });
        let stopPhrasesLoop = false; phrasesOverlay.addEventListener('click', () => { stopPhrasesLoop = true; phrasesOverlay.style.opacity = '0'; document.body.classList.add('active'); setTimeout(() => { phrasesOverlay.style.display = 'none'; }, 1000); });
        async function runPhrasesLoop() { let index = 0; while (!stopPhrasesLoop) { await scrambleTo(phrasesContainer, phrasesList[index]); if (stopPhrasesLoop) break; await new Promise(r => setTimeout(r, 4000)); if (stopPhrasesLoop) break; index = (index + 1) % phrasesList.length; } }
        function scrambleTo(element, newText) { return new Promise(resolve => { const oldText = element.innerText; const length = Math.max(oldText.length, newText.length); const queue = []; const chars = '!<>-_\\/[]{}—=+*^?#________'; for (let i = 0; i < length; i++) { const from = oldText[i] || ''; const to = newText[i] || ''; const start = Math.floor(Math.random() * 40); const end = start + Math.floor(Math.random() * 40); queue.push({ from, to, start, end }); } let frame = 0; const update = () => { let output = ''; let complete = 0; for (let i = 0; i < queue.length; i++) { let { from, to, start, end, char } = queue[i]; if (frame >= end) { complete++; output += to; } else if (frame >= start) { if (!char || Math.random() < 0.28) { char = chars[Math.floor(Math.random() * chars.length)]; queue[i].char = char; } output += `<span class="glitch-char">${char}</span>`; } else { output += from; } } element.innerHTML = output; if (complete === queue.length) { resolve(); } else { if (stopPhrasesLoop && element === phrasesContainer) { resolve(); return; } requestAnimationFrame(update); frame++; } }; update(); }); }
        async function runGhostTypewriter(text, element, callback) { const chars = '!<>-_\\/[]{}—=+*^?#________'; element.innerHTML = ''; const spans = []; for (let i = 0; i < text.length; i++) { const char = text[i]; if (char === '\n') { element.appendChild(document.createElement('br')); spans.push({ isBreak: true }); } else { const span = document.createElement('span'); span.innerText = char; span.dataset.char = char; span.className = 'char-hidden'; element.appendChild(span); spans.push({ dom: span, isBreak: false }); } } for (let i = 0; i < spans.length; i++) { if (bioFinished) break; const item = spans[i]; if (item.isBreak) { await new Promise(r => setTimeout(r, 30)); continue; } const span = item.dom; if (span.innerText === ' ') { span.className = ''; span.innerHTML = '&nbsp;'; span.style.opacity = '1'; await new Promise(r => setTimeout(r, 5)); continue; } span.className = 'glitch-char'; span.style.opacity = '1'; for (let j = 0; j < 3; j++) { span.innerText = chars[Math.floor(Math.random() * chars.length)]; await new Promise(r => setTimeout(r, 10)); } span.innerText = span.dataset.char; span.className = ''; } bioFinished = true; if (callback) callback(); }
        const cursorDot = document.querySelector('.cursor-dot'); const cursorOutline = document.querySelector('.cursor-outline'); window.addEventListener('mousemove', function (e) { const posX = e.clientX; const posY = e.clientY; cursorDot.style.left = `${posX}px`; cursorDot.style.top = `${posY}px`; cursorOutline.animate({ left: `${posX}px`, top: `${posY}px` }, { duration: 500, fill: "forwards" }); }); const addHoverEffect = (element) => { element.addEventListener('mouseenter', () => { cursorOutline.style.width = '60px'; cursorOutline.style.height = '60px'; cursorOutline.style.backgroundColor = 'rgba(0, 255, 136, 0.1)'; }); element.addEventListener('mouseleave', () => { cursorOutline.style.width = '40px'; cursorOutline.style.height = '40px'; cursorOutline.style.backgroundColor = 'transparent'; }); }; addHoverEffect(startBtn); addHoverEffect(aboutOverlay); addHoverEffect(phrasesOverlay); addHoverEffect(closeBtn); addHoverEffect(heroName); addHoverEffect(heroSubtitle); addHoverEffect(skillsToggle); addHoverEffect(panelHeader);

        const scene = new THREE.Scene(); scene.fog = new THREE.FogExp2(0x050505, 0.002); const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000); camera.position.set(-10, 5, 10); camera.lookAt(0, 0, 0); const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true }); renderer.setSize(window.innerWidth, window.innerHeight); document.getElementById('canvas-container').appendChild(renderer.domElement); const controls = new OrbitControls(camera, renderer.domElement); controls.enableDamping = true; controls.dampingFactor = 0.05; controls.enableZoom = true; controls.autoRotate = false;
        const geometry = new THREE.IcosahedronGeometry(4, 2); const material = new THREE.MeshBasicMaterial({ color: 0x00ff88, wireframe: true, transparent: true, opacity: 0.15 }); const sphere = new THREE.Mesh(geometry, material); scene.add(sphere); const pGeo = new THREE.BufferGeometry(); const pCount = 2000; const pPos = new Float32Array(pCount * 3); for (let i = 0; i < pCount * 3; i++) pPos[i] = (Math.random() - 0.5) * 30; pGeo.setAttribute('position', new THREE.BufferAttribute(pPos, 3)); const pMat = new THREE.PointsMaterial({ size: 0.03, color: 0xffffff }); const particles = new THREE.Points(pGeo, pMat); scene.add(particles);
        const raycaster = new THREE.Raycaster(); const mouse = new THREE.Vector2(); const projectNodes = []; fetch('projetos.json').then(r => r.json()).then(projetos => { const projectGroup = new THREE.Group(); scene.add(projectGroup); const radius = 6.5; const goldenAngle = Math.PI * (3 - Math.sqrt(5)); projetos.forEach((proj, i) => { const y = 1 - (i / (projetos.length - 1)) * 2; const radiusAtY = Math.sqrt(1 - y * y); const theta = goldenAngle * i; const x = Math.cos(theta) * radiusAtY; const z = Math.sin(theta) * radiusAtY; const nodeGeo = new THREE.SphereGeometry(0.3, 16, 16); const nodeMat = new THREE.MeshBasicMaterial({ color: 0xffffff }); const node = new THREE.Mesh(nodeGeo, nodeMat); node.position.set(x * radius, y * radius, z * radius); node.userData = { id: i, data: proj }; projectNodes.push(node); projectGroup.add(node); }); }).catch(e => console.error(e));
        window.addEventListener('click', (event) => { if (!document.body.classList.contains('active')) return; if (event.target.closest('#project-modal') || event.target.closest('.close-modal') || event.target.closest('.hero') || event.target.closest('#skills-panel') || event.target.closest('#skills-toggle')) return; mouse.x = (event.clientX / window.innerWidth) * 2 - 1; mouse.y = -(event.clientY / window.innerHeight) * 2 + 1; raycaster.setFromCamera(mouse, camera); const intersects = raycaster.intersectObjects(projectNodes); if (intersects.length > 0) { const clickedNode = intersects[0].object; const projectData = clickedNode.userData.data; openModal(projectData); } });
        function openModal(data) { modalTitle.innerText = data.titulo; modalTech.innerText = "// " + data.tech; modalDesc.innerText = data.descricao; modal.style.display = 'flex'; setTimeout(() => { modal.classList.add('open'); }, 10); }
        closeBtn.addEventListener('click', () => { modal.classList.remove('open'); setTimeout(() => { modal.style.display = 'none'; }, 500); });
        function animate() { requestAnimationFrame(animate); controls.update(); renderer.render(scene, camera); } animate(); window.addEventListener('resize', () => { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); });
    </script>
</body>
</html>